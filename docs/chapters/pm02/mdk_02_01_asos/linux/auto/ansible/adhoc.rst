Ad Hoc команды
""""""""""""""""

Ad-hoc команды - это возможность запустить какое-то действие Ansible из командной строки.

Это специальная команда Ansible использует инструмент командной строки /usr/bin/ansible для автоматизации одной задачи на одном или нескольких управляемых узлах. Специальные команды выполняются быстро и просто, но их нельзя использовать повторно. Используются, как правило, в тех случаях, когда надо что-то проверить, например, работу модуля. Или просто выполнить какое-то разовое действие, которое не нужно сохранять. В любом случае, это простой и быстрый способ начать использовать Ansible.

Специальная команда выглядит следующим образом:

::

        $ ansible [pattern] -m [module] -a "[module options]"


Модулем по умолчанию для утилиты командной строки ansible является модуль **ansible.builtin.command**

Параметр **-a** принимает параметры с помощью синтаксиса ключ=значение



Сначала нужно создать в локальном каталоге инвентарный файл. Назовем его myhosts.ini:



Список групп серверов, которыми нужно управлять, Ansible может получать двумя основными способами:
* из специального текстового файла **hosts**;
* с помощью внешнего скрипта, возвращающего нужный нам список серверов, например из MongoDB. В официальном github-репозитории есть готовые скрипты для получения списка из Cobbler, Digital Ocean, EC2, Linode, OpenStack Nova, Openshift, Spacewalk, Vagrant, Zabbix.

Инвентарный файл (hosts)
~~~~~~~~~~~~~~

Инвентарный файл - это файл, в котором описываются устройства, к которым Ansible будет подключаться.

Дефолтное расположение файла 

::

        —/etc/ansible/hosts
